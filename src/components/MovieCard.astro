---
// Props passed to the component
const { movie } = Astro.props;

// Fallback image if poster_path is missing
const posterUrl = movie.poster_path
  ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
  : '/fallback-poster.png';

// Format release date nicely
const releaseDate = movie.release_date
  ? new Date(movie.release_date).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' })
  : 'Unknown';
---

<article class="bg-white dark:bg-gray-800 shadow-lg rounded-2xl overflow-hidden transform hover:scale-105 transition-transform duration-300">
  <img
    src={posterUrl}
    alt={movie.title}
    class="w-full h-[400px] object-cover"
    loading="lazy"
  />
  <div class="p-4">
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white truncate">{movie.title}</h2>
    <p class="text-sm text-gray-500 dark:text-gray-300 mt-1">{releaseDate}</p>
    <p class="text-gray-700 dark:text-gray-200 mt-2 line-clamp-3">
      {movie.overview || 'No description available.'}
    </p>
    <div class="mt-3 flex items-center justify-between">
      <span class="bg-yellow-400 text-black px-2 py-1 rounded-md font-semibold text-sm">
        ‚≠ê {movie.vote_average.toFixed(1)}
      </span>
      <span class="text-sm text-gray-500 dark:text-gray-300">{movie.vote_count} votes</span>
    </div>
  </div>
</article>
